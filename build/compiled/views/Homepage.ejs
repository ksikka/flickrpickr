<html>
     <head>
     <!-- autogenerated css-->     <link href="/static/style.css"></script>     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>    <!-- begin autogenerated api client library -->     <script type="text/javascript"><% include modeldefs %></script>
     <script src="/static/models.js"></script>     <!-- end autogenerated api client library -->     <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
     </head>
     <body>
     <style>img.piclist {max-height: 200px; max-width: 300px;}</style>
<h1>
Search Flickr
</h1>
<form id="myflicksearch">
<input type="text" name="q">
<input type="submit" value="Hit the backend!">
</form>
<div id="myflickgallery"></div>
<h1>Create a Picture</h1>
<form id="testform">

<input type="text" name="name" placeholder="Name"><br>

<input type="text" name="url" placeholder="URL"><br>

<input type="submit" value="Submit"><br>
</form>

<div id="piclist"></div>
<h1>Sign Up</h1>
<form id="signup">
<input name="username" type="text" placeholder="Username"><br>
<input name="password" type="password" placeholder="Password"><br>
<input name="password2" type="password" placeholder="Confirm password"><br>
<input type="submit" value="Submit">
</form>
<h1>Login</h1>
<script type="text/javascript">function renderInList (e, d) {    if (e) alert(e);    else {        for (var i = 0; i < d.photos.photo.length; i ++) {            var photo = d.photos.photo[i];            $('#myflickgallery').append('<img src="'+photo.url_q+'">');        }    }}$('#myflicksearch').submit(function() {    var formData = $('#myflicksearch').serializeArray();    models.Picture.randomNFromFlickr(formData[0].value, 10, renderInList);    return false;});</script>
<script type="text/javascript">$('#testform').submit(function(){
    var formdata = {};
    formdata.name = $('#testform input[name="name"]').val();
    formdata.url = $('#testform input[name="url"]').val();
    models.Picture.createPicture(formdata, function(err, data){
        console.log(data);
        if (err) {
            // Do whatever you want with user errors
            alert(err);
        }
        else {
            // You can redirect on success
            location.href = '/?success=true';
        }
    });
    return false;
});
</script>
<script type="text/javascript">models.Picture.findPicture({}, function(err, data){
_.each(data, function(d) {$('#piclist').append('<p>'+d.name+'</p><img class="piclist" src="'+d.url+'">'); });
});</script>
<script type="text/javascript">$('#signup').submit(function(){
    var username = $('#signup input[name="username"]').val();
    var password = $('#signup input[name="password"]').val();
    var password2 = $('#signup input[name="password2"]').val();
    models.User.signup(username, password, password2, function(err, data){
        if (err) { alert(err); }
        else { location.href = data.url; }
        
    });
    return false;
});</script>
     </body>
 </html>
